<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Каталог товаров | Фабрика торгового оборудования</title>
    <meta name="description" content="Полный каталог товаров фабрики торгового оборудования: мебель, торговое оборудование, фурнитура">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header (динамически загружается) -->
    <header id="header-container"></header>

    <!-- Модальное окно корзины (динамически загружается) -->
    <div id="cart-modal-container"></div>

    <!-- Hero Section -->
    <section class="parallax parallax-hero" style="background-image: url('images/hero/catalog-hero.jpg');">
        <div class="hero-content">
            <h1>Полный каталог<br>нашей продукции</h1>
            <p style="font-size: 1.3rem; margin: 25px 0; opacity: 0.9;">Широкий ассортимент товаров для вашего бизнеса и дома</p>
            <div style="display: flex; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
                <a href="tel:+79601786738" class="btn btn-secondary">Заказать расчет</a>
                <a href="https://t.me/FTO_NN" class="btn btn-secondary">Консультация в Telegram</a>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="section">
        <div class="container">
            <h2 class="section-title">Категории товаров</h2>
            <div class="categories-grid" id="categories-container">
                <!-- Категории будут загружены из JSON -->
            </div>
        </div>
    </section>

    <!-- Furniture Section -->
    <section id="furniture" class="section">
        <div class="container">
            <h2 class="section-title">Мебель</h2>
            <div class="products-grid stagger-animation" id="furniture-container">
                <!-- Товары будут загружены из JSON -->
            </div>
        </div>
    </section>

    <!-- Equipment Section -->
    <section id="equipment" class="section">
        <div class="container">
            <h2 class="section-title">Торговое оборудование</h2>
            <div class="products-grid stagger-animation" id="equipment-container">
                <!-- Товары будут загружены из JSON -->
            </div>
        </div>
    </section>

    <!-- Hardware Section -->
    <section id="hardware" class="section">
        <div class="container">
            <h2 class="section-title">Мебельная фурнитура</h2>
            <div class="products-grid stagger-animation" id="hardware-container">
                <!-- Товары будут загружены из JSON -->
            </div>
        </div>
    </section>

    <!-- Footer (динамически загружается) -->
    <footer id="footer-container"></footer>

    <div id="toast-container"></div>

    <!-- Загрузка скриптов -->
    <script src="js/header.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Загрузка и отображение каталога
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const response = await fetch('data/catalog.json');
                const catalogData = await response.json();
                
                // Отображение категорий
                const categoriesContainer = document.getElementById('categories-container');
                catalogData.categories.forEach(category => {
                    const categoryCard = document.createElement('a');
                    categoryCard.href = `#${category.id}`;
                    categoryCard.className = 'category-card';
                    categoryCard.innerHTML = `
                        <div class="category-image">
                            <img src="${category.image}" alt="${category.name}" loading="lazy">
                        </div>
                        <h3 class="category-title">${category.name}</h3>
                        <p>${category.description}</p>
                    `;
                    categoriesContainer.appendChild(categoryCard);
                });
                
                // Отображение товаров по категориям
                catalogData.products.forEach(product => {
                    let container;
                    if (product.category === 'furniture') {
                        container = document.getElementById('furniture-container');
                    } else if (product.category === 'equipment') {
                        container = document.getElementById('equipment-container');
                    } else if (product.category === 'hardware') {
                        container = document.getElementById('hardware-container');
                    }
                    
                    if (container && product.inStock) {
                        const productCard = document.createElement('div');
                        productCard.className = 'product-card parallax-item';
                        productCard.innerHTML = `
                            <div class="product-image">
                                <img src="${product.imageUrl}" alt="${product.name}" loading="lazy">
                                ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                            </div>
                            <div class="product-content">
                                <h3 class="product-title">${product.name}</h3>
                                <div class="product-price">
                                    ${product.price.toLocaleString('ru-RU')} ₽
                                    ${product.oldPrice ? `<span class="old-price">${product.oldPrice.toLocaleString('ru-RU')} ₽</span>` : ''}
                                </div>
                                <p class="product-description">${product.description}</p>
                                <div class="product-actions">
                                    <button class="btn contact-btn add-to-cart"
                                        data-id="${product.id}"
                                        data-name="${product.name}"
                                        data-price="${product.price}">
                                        <i class="fas fa-cart-plus"></i> В корзину
                                    </button>
                                    <a href="tel:+79601786738" class="btn contact-btn phone-btn">Позвонить</a>
                                </div>
                            </div>
                        `;
                        container.appendChild(productCard);
                    }
                });
                
                console.log('✅ Каталог успешно загружен и отображен');
            } catch (error) {
                console.error('❌ Ошибка загрузки каталога:', error);
            }
        });
    </script>
</body>
</html>
